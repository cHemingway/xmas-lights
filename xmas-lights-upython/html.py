def generate_html(patterns_json):
    return '''<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><title>Xmas Lights</title><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65 crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js integrity=sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4 crossorigin=anonymous></script><link rel=stylesheet data-name=vs/editor/editor.main href=https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs/editor/editor.main.min.css><style>.error-tooltip{--bs-tooltip-bg:var(--bs-red);--bs-tooltip-max-width:500px;--bs-tooltip-opacity:100}.tooltip-inner{text-align:left}.editButton{border:none;background:0 0;margin:0;padding:0;color:#1e90ff;visibility:hidden}.editButton:hover{color:#00f}.buttonParent:hover .editButton{visibility:visible}.activeTd{display:flex;justify-content:center}.errorButton{border:none;background:0 0;margin:0;padding:0 4px 0 0;color:var(--bs-red);cursor:default!important}.activeButton{border:none;background:0 0;margin:0;padding:0;color:gray;visibility:hidden;alignment:right}.activeButton .bi-stop-fill{display:none;color:#000}.activeButton.active{visibility:visible;color:#000}.activeButton.active:hover .bi-stop-fill{display:inline-block;visibility:visible;color:#000}.activeButton.active:hover .bi-play-fill{display:none;color:#000}.activeButton:hover{color:#000}.buttonParent:hover .activeButton{visibility:visible}</style></head><body><h1 style=text-align:center>Xmas Lights</h1><table style=width:auto;margin-left:auto;margin-right:auto class="table table-hover"><thead><tr><th>Status</th><th>Name</th><th>Author</th><th></th></tr></thead><tbody id=patternsTable></tbody></table><div class="modal fade" id=editPatternModal tabindex=-1><div class=modal-dialog><div class=modal-content><div class=modal-header><h1 class="modal-title fs-5" id=editPatternModalLabel>Edit pattern</h1><button type=button class=btn-close data-bs-dismiss=modal aria-label=Close></button></div><div class=modal-body><form><div class=form-group><label for=editPatternName>Name:</label> <input class=form-control id=editPatternName type=text></div><br><div class=form-group><label for=editPatternAuthor>Author:</label> <input class=form-control id=editPatternAuthor type=text></div><br><div class=form-group><label for=monaco-editor-container>Code:</label><details><summary class=text-primary>Instructions</summary></details><div id=monaco-editor-container style="height:400px;border:1px solid #000"></div></div></form></div><div class=modal-footer><button type=button class="btn btn-secondary" data-bs-dismiss=modal>Close</button> <button type=button class="btn btn-primary" id=saveButton>Save changes</button></div></div></div></div><script type=text/javascript src=https://unpkg.com/monaco-editor@latest/min/vs/loader.js></script><script>require.config({paths:{vs:"https://unpkg.com/monaco-editor@latest/min/vs"}}),window.MonacoEnvironment={getWorkerUrl:function(t,o){return"data:text/javascript;charset=utf-8,"+encodeURIComponent("self.MonacoEnvironment = {"`baseUrl: 'https://unpkg.com/monaco-editor@latest/min/'``};``importScripts('https://unpkg.com/monaco-editor@latest/min/vs/base/worker/workerMain.js');`)}}</script><script>const myModal=new bootstrap.Modal(document.getElementById("editPatternModal"),{}),editPatternName=document.getElementById("editPatternName"),editPatternAuthor=document.getElementById("editPatternAuthor");let monacoEditor=null;function escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function editPattern(e){require(["vs/editor/editor.main"],function(){(monacoEditor=null===monacoEditor?monaco.editor.create(document.getElementById("monaco-editor-container"),{value:"placeholder",language:"python",theme:"vs-dark",minimap:{enabled:!1},automaticLayout:!0,lineNumbersMinChars:3}):monacoEditor).setValue(patterns[e].script)}),editPatternName.value=patterns[e].name,editPatternAuthor.value=patterns[e].author,myModal.show(),document.getElementById("saveButton").onclick=()=>{const t=new XMLHttpRequest;t.open("POST","/",!0),t.setRequestHeader("Content-Type","application/json"),t.onreadystatechange=()=>{t.readyState===XMLHttpRequest.DONE&&200===t.status&&location.reload()},t.send(JSON.stringify({id:e,name:editPatternName.value,author:editPatternAuthor.value,script:monacoEditor.getValue(),active:patterns[e].active}))}}patternsJson=''' + patterns_json + ''';let patterns=JSON.parse(patternsJson);const table=document.getElementById("patternsTable");for(const[d,e]of Object.entries(patterns)){let t=document.createElement("tr"),a=document.createElement("td"),r=(a.className="activeTd",document.createElement("button")),i=(r.innerHTML='<h6 style="margin: 0"><i class="bi bi-exclamation-circle"></i></h6>',r.className="errorButton",r.setAttribute("data-bs-toggle","tooltip"),r.setAttribute("data-bs-placement","bottom"),r.setAttribute("data-bs-custom-class","error-tooltip"),r.setAttribute("data-bs-html","true"),document.createElement("button")),l=(i.innerHTML='<h5 style="margin: 0"><i class="bi bi-play-fill"></i><i class="bi bi-stop-fill"></i></h5>',i.type="button",i.className="activeButton",i.onclick=()=>{const t=new XMLHttpRequest;t.open("POST","/",!0),t.setRequestHeader("Content-Type","application/json"),t.onreadystatechange=()=>{t.readyState===XMLHttpRequest.DONE&&200===t.status&&location.reload()},t.send(JSON.stringify({id:d,active:!e.active}))},e.active&&i.classList.add("active"),e.hasOwnProperty("error")&&null!==e.error&&(r.setAttribute("data-bs-title",escapeHtml(e.error).replaceAll("\\n","<br>")),a.appendChild(r)),a.appendChild(i),t.appendChild(a),document.createElement("td")),c=(l.innerText=e.name,t.appendChild(l),document.createElement("td")),s=(c.innerText=e.author,t.appendChild(c),document.createElement("td")),u=document.createElement("button");u.innerText="Edit",u.type="button",u.className="editButton",u.onclick=()=>{editPattern(d)},s.appendChild(u),t.appendChild(s),t.className="buttonParent",table.appendChild(t);const n=document.querySelectorAll('[data-bs-toggle="tooltip"]'),o=[...n].map(t=>new bootstrap.Tooltip(t))}</script></body></html>'''